(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4954],{94201:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/orders",function(){return r(86297)}])},47559:function(e,n,r){"use strict";r.d(n,{I:function(){return o}});var t=r(85893),a=r(45697),l=r.n(a),s=r(90948);let i=(0,s.ZP)("span")(e=>{let{theme:n,ownerState:r}=e,t=n.palette[r.color].alpha12,a="dark"===n.palette.mode?n.palette[r.color].main:n.palette[r.color].dark;return{alignItems:"center",backgroundColor:t,borderRadius:12,color:a,cursor:"default",display:"inline-flex",flexGrow:0,flexShrink:0,fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(12),lineHeight:2,fontWeight:600,justifyContent:"center",letterSpacing:.5,minWidth:20,paddingLeft:n.spacing(1),paddingRight:n.spacing(1),textTransform:"uppercase",whiteSpace:"nowrap"}}),o=e=>{let{color:n="primary",children:r,...a}=e;return(0,t.jsx)(i,{ownerState:{color:n},...a,children:r})};o.propTypes={children:l().node,color:l().oneOf(["primary","secondary","error","info","warning","success"])}},3322:function(e,n,r){"use strict";r.d(n,{r:function(){return a}});var t=r(67294);let a=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,t.useRef)(!0);(0,t.useEffect)(()=>{if(!r.current)return e();r.current=!1},n)}},86297:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return ei}});var t=r(85893),a=r(67294),l=r(10216),s=r(87357),i=r(11057),o=r(67720),c=r(51233),d=r(53219),u=r(15861),h=r(12739),p=r(59598),x=r(83107),j=r(5385),g=r(22842),m=r(73934),v=r(45697),b=r.n(v),f=r(45331),Z=r(77533),y=r(93946),C=r(98396),w=r(32912),P=r(92077),k=r.n(P),S=r(76585),A=r(7906),R=r(295),W=r(98102),I=r(53184),_=r(53816),D=r(3782),T=r(50424),E=r(47559),O=r(96277);let G={canceled:"warning",complete:"success",pending:"info",rejected:"error"},L=e=>{let{onApprove:n,onEdit:r,onReject:a,order:l}=e,s=(0,C.Z)(e=>e.breakpoints.up("lg")),o=s?"horizontal":"vertical",h=l.items||[],p=(0,w.Z)(l.createdAt,"dd/MM/yyyy HH:mm"),x=G[l.status],j=k()(l.totalAmount).format("".concat(l.currency,"0,0.00"));return(0,t.jsxs)(c.Z,{spacing:6,children:[(0,t.jsxs)(c.Z,{spacing:3,children:[(0,t.jsxs)(c.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:3,children:[(0,t.jsx)(u.Z,{variant:"h6",children:"Details"}),(0,t.jsx)(i.Z,{color:"inherit",onClick:r,size:"small",startIcon:(0,t.jsx)(d.Z,{children:(0,t.jsx)(S.Z,{})}),children:"Edit"})]}),(0,t.jsxs)(D.c,{children:[(0,t.jsx)(T.c,{align:o,disableGutters:!0,divider:!0,label:"ID",value:l.id}),(0,t.jsx)(T.c,{align:o,disableGutters:!0,divider:!0,label:"Number",value:l.number}),(0,t.jsxs)(T.c,{align:o,disableGutters:!0,divider:!0,label:"Customer",children:[(0,t.jsx)(u.Z,{color:"text.secondary",variant:"body2",children:l.customer.name}),(0,t.jsx)(u.Z,{color:"text.secondary",variant:"body2",children:l.customer.address1}),(0,t.jsx)(u.Z,{color:"text.secondary",variant:"body2",children:l.customer.city}),(0,t.jsx)(u.Z,{color:"text.secondary",variant:"body2",children:l.customer.country})]}),(0,t.jsx)(T.c,{align:o,disableGutters:!0,divider:!0,label:"Date",value:p}),(0,t.jsx)(T.c,{align:o,disableGutters:!0,divider:!0,label:"Promotion Code",value:l.promotionCode}),(0,t.jsx)(T.c,{align:o,disableGutters:!0,divider:!0,label:"Total Amount",value:j}),(0,t.jsx)(T.c,{align:o,disableGutters:!0,divider:!0,label:"Status",children:(0,t.jsx)(E.I,{color:x,children:l.status})})]}),(0,t.jsxs)(c.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",justifyContent:"flex-end",spacing:2,children:[(0,t.jsx)(i.Z,{onClick:n,size:"small",variant:"contained",children:"Approve"}),(0,t.jsx)(i.Z,{color:"error",onClick:a,size:"small",variant:"outlined",children:"Reject"})]})]}),(0,t.jsxs)(c.Z,{spacing:3,children:[(0,t.jsx)(u.Z,{variant:"h6",children:"Line items"}),(0,t.jsx)(O.L,{children:(0,t.jsxs)(A.Z,{sx:{minWidth:400},children:[(0,t.jsx)(I.Z,{children:(0,t.jsxs)(_.Z,{children:[(0,t.jsx)(W.Z,{children:"Description"}),(0,t.jsx)(W.Z,{children:"Billing Cycle"}),(0,t.jsx)(W.Z,{children:"Amount"})]})}),(0,t.jsx)(R.Z,{children:h.map(e=>{let n=k()(e.unitAmount).format("".concat(e.currency,"0,0.00"));return(0,t.jsxs)(_.Z,{children:[(0,t.jsxs)(W.Z,{children:[e.name," x ",e.quantity]}),(0,t.jsx)(W.Z,{children:e.billingCycle}),(0,t.jsx)(W.Z,{children:n})]},e.id)})})]})})]})]})};L.propTypes={onApprove:b().func,onEdit:b().func,onReject:b().func,order:b().object};var N=r(93155);let z=[{label:"Canceled",value:"canceled"},{label:"Complete",value:"complete"},{label:"Pending",value:"pending"},{label:"Rejected",value:"rejected"}],B=e=>{let{onCancel:n,onSave:r,order:a}=e,l=(0,w.Z)(a.createdAt,"dd/MM/yyyy HH:mm");return(0,t.jsx)(c.Z,{spacing:6,children:(0,t.jsxs)(c.Z,{spacing:3,children:[(0,t.jsx)(u.Z,{variant:"h6",children:"Details"}),(0,t.jsxs)(c.Z,{spacing:3,children:[(0,t.jsx)(N.Z,{disabled:!0,fullWidth:!0,label:"ID",name:"id",value:a.id}),(0,t.jsx)(N.Z,{disabled:!0,fullWidth:!0,label:"Number",name:"number",value:a.number}),(0,t.jsx)(N.Z,{disabled:!0,fullWidth:!0,label:"Customer name",name:"customer_name",value:a.customer.name}),(0,t.jsx)(N.Z,{disabled:!0,fullWidth:!0,label:"Date",name:"date",value:l}),(0,t.jsx)(N.Z,{fullWidth:!0,label:"Address",name:"address",value:a.customer.address1}),(0,t.jsx)(N.Z,{fullWidth:!0,label:"Country",name:"country",value:a.customer.country}),(0,t.jsx)(N.Z,{fullWidth:!0,label:"State/Region",name:"state_region",value:a.customer.city}),(0,t.jsx)(N.Z,{fullWidth:!0,label:"Total Amount",name:"amount",value:a.totalAmount}),(0,t.jsx)(N.Z,{fullWidth:!0,label:"Status",name:"status",select:!0,SelectProps:{native:!0},value:a.status,children:z.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)(c.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:2,children:[(0,t.jsx)(i.Z,{color:"primary",onClick:r,size:"small",variant:"contained",children:"Save changes"}),(0,t.jsx)(i.Z,{color:"inherit",onClick:n,size:"small",children:"Cancel"})]})]})})};B.propTypes={onCancel:b().func,onSave:b().func,order:b().object};let F=e=>{let{container:n,onClose:r,open:l,order:i}=e,[o,h]=(0,a.useState)(!1),p=(0,C.Z)(e=>e.breakpoints.up("lg")),x=(0,a.useCallback)(()=>{h(!0)},[]),j=(0,a.useCallback)(()=>{h(!1)},[]),g=null;return(i&&(g=(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",sx:{px:3,py:2},children:[(0,t.jsx)(u.Z,{color:"inherit",variant:"h6",children:i.number}),(0,t.jsx)(y.Z,{color:"inherit",onClick:r,children:(0,t.jsx)(d.Z,{children:(0,t.jsx)(f.Z,{})})})]}),(0,t.jsx)(s.Z,{sx:{px:3,py:4},children:o?(0,t.jsx)(B,{onCancel:j,onSave:j,order:i}):(0,t.jsx)(L,{onApprove:r,onEdit:x,onReject:r,order:i})})]})),p)?(0,t.jsx)(Z.ZP,{anchor:"right",open:l,PaperProps:{sx:{position:"relative",width:500}},SlideProps:{container:n},variant:"persistent",children:g}):(0,t.jsx)(Z.ZP,{anchor:"left",hideBackdrop:!0,ModalProps:{container:n,sx:{pointerEvents:"none",position:"absolute"}},onClose:r,open:l,PaperProps:{sx:{maxWidth:"100%",width:400,pointerEvents:"auto",position:"absolute"}},SlideProps:{container:n},variant:"temporary",children:g})};F.propTypes={container:b().any,onClose:b().func,open:b().bool,order:b().object};var M=r(90948);let H=(0,M.ZP)("div",{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:n,open:r}=e;return{flexGrow:1,overflow:"auto",zIndex:1,[n.breakpoints.up("lg")]:{marginRight:-500},transition:n.transitions.create("margin",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),...r&&{[n.breakpoints.up("lg")]:{marginRight:0},transition:n.transitions.create("margin",{easing:n.transitions.easing.easeOut,duration:n.transitions.duration.enteringScreen})}}});var q=r(95226),X=r(87109),U=r(57709),V=r(40044),J=r(86517),K=r(3322);let Q=[{label:"All",value:"all"},{label:"Canceled",value:"canceled"},{label:"Completed",value:"complete"},{label:"Pending",value:"pending"},{label:"Rejected",value:"rejected"}],Y=[{label:"Newest",value:"desc"},{label:"Oldest",value:"asc"}],$=e=>{let{onFiltersChange:n,onSortChange:r,sortDir:l="asc"}=e,i=(0,a.useRef)(null),[u,h]=(0,a.useState)("all"),[p,x]=(0,a.useState)({query:void 0,status:void 0}),j=(0,a.useCallback)(()=>{null==n||n(p)},[p,n]);(0,K.r)(()=>{j()},[p,j]);let g=(0,a.useCallback)((e,n)=>{h(n);let r="all"===n?void 0:n;x(e=>({...e,status:r}))},[]),m=(0,a.useCallback)(e=>{var n;e.preventDefault();let r=(null===(n=i.current)||void 0===n?void 0:n.value)||"";x(e=>({...e,query:r}))},[]),v=(0,a.useCallback)(e=>{let n=e.target.value;null==r||r(n)},[r]);return(0,t.jsxs)("div",{children:[(0,t.jsx)(J.Z,{indicatorColor:"primary",onChange:g,scrollButtons:"auto",sx:{px:3},textColor:"primary",value:u,variant:"scrollable",children:Q.map(e=>(0,t.jsx)(V.Z,{label:e.label,value:e.value},e.value))}),(0,t.jsx)(o.Z,{}),(0,t.jsxs)(c.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",gap:3,sx:{p:3},children:[(0,t.jsx)(s.Z,{component:"form",onSubmit:m,sx:{flexGrow:1},children:(0,t.jsx)(U.Z,{defaultValue:"",fullWidth:!0,inputProps:{ref:i},name:"orderNumber",placeholder:"Search by order number",startAdornment:(0,t.jsx)(X.Z,{position:"start",children:(0,t.jsx)(d.Z,{children:(0,t.jsx)(q.Z,{})})})})}),(0,t.jsx)(N.Z,{label:"Sort By",name:"sort",onChange:v,select:!0,SelectProps:{native:!0},value:l,children:Y.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})};$.propTypes={onFiltersChange:b().func,onSortChange:b().func,sortBy:b().string,sortDir:b().oneOf(["asc","desc"])};var ee=r(8896);let en={complete:"success",pending:"info",canceled:"warning",rejected:"error"},er=e=>{let{count:n=0,items:r=[],onPageChange:a=()=>{},onRowsPerPageChange:l,onSelect:i,page:o=0,rowsPerPage:c=0}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(A.Z,{children:(0,t.jsx)(R.Z,{children:r.map(e=>{let n=(0,w.Z)(e.createdAt,"LLL").toUpperCase(),r=(0,w.Z)(e.createdAt,"d"),a=k()(e.totalAmount).format("".concat(e.currency,"0,0.00")),l=en[e.status]||"warning";return(0,t.jsxs)(_.Z,{hover:!0,onClick:()=>null==i?void 0:i(e.id),sx:{cursor:"pointer"},children:[(0,t.jsxs)(W.Z,{sx:{alignItems:"center",display:"flex"},children:[(0,t.jsxs)(s.Z,{sx:{backgroundColor:e=>"dark"===e.palette.mode?"neutral.800":"neutral.200",borderRadius:2,maxWidth:"fit-content",ml:3,p:1},children:[(0,t.jsx)(u.Z,{align:"center",variant:"subtitle2",children:n}),(0,t.jsx)(u.Z,{align:"center",variant:"h6",children:r})]}),(0,t.jsxs)(s.Z,{sx:{ml:2},children:[(0,t.jsx)(u.Z,{variant:"subtitle2",children:e.number}),(0,t.jsxs)(u.Z,{color:"text.secondary",variant:"body2",children:["Total of ",a]})]})]}),(0,t.jsx)(W.Z,{align:"right",children:(0,t.jsx)(E.I,{color:l,children:e.status})})]},e.id)})})}),(0,t.jsx)(ee.Z,{component:"div",count:n,onPageChange:a,onRowsPerPageChange:l,page:o,rowsPerPage:c,rowsPerPageOptions:[5,10,25]})]})};er.propTypes={count:b().number,items:b().array,onPageChange:b().func,onRowsPerPageChange:b().func,onSelect:b().func,page:b().number,rowsPerPage:b().number};let et=()=>{let[e,n]=(0,a.useState)({filters:{query:void 0,status:void 0},page:0,rowsPerPage:5,sortBy:"createdAt",sortDir:"desc"}),r=(0,a.useCallback)(e=>{n(n=>({...n,filters:e}))},[]),t=(0,a.useCallback)(e=>{n(n=>({...n,sortDir:e}))},[]),l=(0,a.useCallback)((e,r)=>{n(e=>({...e,page:r}))},[]),s=(0,a.useCallback)(e=>{n(n=>({...n,rowsPerPage:parseInt(e.target.value,10)}))},[]);return{handleFiltersChange:r,handleSortChange:t,handlePageChange:l,handleRowsPerPageChange:s,state:e}},ea=e=>{let n=(0,j.s)(),[r,t]=(0,a.useState)({orders:[],ordersCount:0}),l=(0,a.useCallback)(async()=>{try{let r=await h.k.getOrders(e);n()&&t({orders:r.data,ordersCount:r.count})}catch(e){console.error(e)}},[e,n]);return(0,a.useEffect)(()=>{l()},[e]),{...r}},el=(e,n)=>(0,a.useMemo)(()=>{if(n)return e.find(e=>e.id===n)},[e,n]),es=()=>{let e=(0,a.useRef)(null),n=et(),r=ea(n.state),h=(0,x.R)(),j=el(r.orders,h.data);(0,g.a)();let m=(0,a.useCallback)(e=>{if(h.open&&h.data===e){h.handleClose();return}h.handleOpen(e)},[h]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.p,{title:"Dashboard: Order List"}),(0,t.jsx)(o.Z,{}),(0,t.jsx)(s.Z,{component:"main",ref:e,sx:{display:"flex",flex:"1 1 auto",overflow:"hidden",position:"relative"},children:(0,t.jsxs)(s.Z,{ref:e,sx:{bottom:0,display:"flex",left:0,position:"absolute",right:0,top:0},children:[(0,t.jsxs)(H,{open:h.open,children:[(0,t.jsx)(s.Z,{sx:{p:3},children:(0,t.jsxs)(c.Z,{alignItems:"flex-start",direction:"row",justifyContent:"space-between",spacing:4,children:[(0,t.jsx)("div",{children:(0,t.jsx)(u.Z,{variant:"h4",children:"Orders"})}),(0,t.jsx)("div",{children:(0,t.jsx)(i.Z,{startIcon:(0,t.jsx)(d.Z,{children:(0,t.jsx)(l.Z,{})}),variant:"contained",children:"Add"})})]})}),(0,t.jsx)(o.Z,{}),(0,t.jsx)($,{onFiltersChange:n.handleFiltersChange,onSortChange:n.handleSortChange,sortBy:n.state.sortBy,sortDir:n.state.sortDir}),(0,t.jsx)(o.Z,{}),(0,t.jsx)(er,{count:r.ordersCount,items:r.orders,onPageChange:n.handlePageChange,onRowsPerPageChange:n.handleRowsPerPageChange,onSelect:m,page:n.state.page,rowsPerPage:n.state.rowsPerPage})]}),(0,t.jsx)(F,{container:e.current,onClose:h.handleClose,open:h.open,order:j})]})})]})};es.getLayout=e=>(0,t.jsx)(m.A,{children:e});var ei=es},10216:function(e,n,r){"use strict";var t=r(87462);r(67294);var a=r(85893);n.Z=function(e){return(0,a.jsx)("svg",(0,t.Z)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e,{children:(0,a.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v14m-7-7h14"})}))}}},function(e){e.O(0,[4310,1425,8471,3155,3473,2777,2053,7483,7504,2077,7375,2461,8896,7673,863,9774,2888,179],function(){return e(e.s=94201)}),_N_E=e.O()}]);